<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="og:site_name" content="hungry.dev"/><link rel="canonical" href="https://hungry.dev/posts/2020/base64-encoding-options"/><meta name="twitter:url" content="https://hungry.dev/posts/2020/base64-encoding-options"/><meta name="og:url" content="https://hungry.dev/posts/2020/base64-encoding-options"/><title>Base64 Encoding Options | hungry.dev</title><meta name="twitter:title" content="Base64 Encoding Options | hungry.dev"/><meta name="og:title" content="Base64 Encoding Options | hungry.dev"/><meta name="description" content="Personal blog."/><meta name="twitter:description" content="Personal blog."/><meta name="og:description" content="Personal blog."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/primer.css" type="text/css"/><link rel="stylesheet" href="/github.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to hungry.dev"/></head><body><header><div class="border-bottom border-gray-light"><div class="container-md px-3 my-0 markdown-body"><div class="d-flex flex-items-baseline"><a class="h3 py-3 pr-6 color-fg-default no-underline" href="/">hungry.dev</a><a class="h5 p-3 color-fg-default no-underline" href="/">Posts</a><a class="h5 p-3 color-fg-default no-underline" href="/apps">Apps</a></div></div></div></header><div class="container-md px-3 my-5 markdown-body"><p class="text-small text-gray">8 March 2020</p><h1>Base64 Encoding Options</h1><p>Encoding binary data to <a href="https://en.wikipedia.org/wiki/Base64">Base64</a> is a common operation in the programming world. Simplest <a href="https://stackoverflow.com/a/201510">use case</a> is probably to transport binary data over the network in common encoding so it doesn't get currupt while being processed by different systems. There are more <a href="https://en.wikipedia.org/wiki/Base64#Implementations_and_history">use cases</a>, some of them are also mentioned in examples bellow.</p><p>In this article we will go over the different encoding options provided in Apple's <a href="https://developer.apple.com/documentation/foundation">Foundation</a> framework as part of the <a href="https://developer.apple.com/documentation/foundation/data"><code>Data</code></a> object.</p><h2>Example Data</h2><p>In the examples bellow, example data is encoded using <a href="https://developer.apple.com/documentation/foundation/nsdata/1413546-base64encodedstring"><code>base64EncodedString(options:)</code></a> instance method on <code>Data</code>. Same options can be applied with <a href="https://developer.apple.com/documentation/foundation/nsdata/1412739-base64encodeddata"><code>base64EncodedData(options:)</code></a>.</p><p>To keep it simple, example data is one hundreed 1s generated like so:</p><pre><code><span class="kd">let</span> <span class="nv">data</span> <span class="p">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">repeating</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="bp">count</span><span class="p">:</span> <span class="mi">100</span><span class="p">)</span>
</code></pre><h2>No Options - <code>[]</code></h2><p>Default and most commonly used operation. Encodes data without any options and returns the result as a single line string.</p><h6>Usage</h6><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">()</span>
</code></pre><h6>Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><h2>Line Lengths</h2><p>Line length options give us the posibility to limit the amount of characters before a line ending is inserted.</p><blockquote><p>⚠️ Only one line length option should be provided, otherwise all options are ignored and the result is returned on a single line.</p></blockquote><h3>64 Characters - <a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1407872-linelength64characters"><code>lineLength64Characters</code></a></h3><p>Common use case of having line length limited to 64 characters is in the privacy-enhanced mail (PEM) standard which is nowadays mostly used to transport certificates and cryptographic keys over the network. You can read more about it in the <em>Printable Encoding</em> section of <a href="https://tools.ietf.org/html/rfc1421#section-4.3.2.4">RFC 1421</a>.</p><h6>Usage</h6><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">lineLength64Characters</span><span class="p">)</span>
</code></pre><h6>Pretty Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQ==
</code></pre><h6>Raw Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQ==
</code></pre><p>Inserts a line ending in form of <code>\r\n</code> every 64 characters. We'll get to what <code>\r\n</code> means and how it can be modified in the Line Endings section.</p><h3>76 Characters - <a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1413700-linelength76characters"><code>lineLength76Characters</code></a></h3><p>Common use case of 76 character line length is for Multipurpose Internet Mail Extensions (MIME) standard which is used to transport email messages. Check out the <em>Base64 Content-Transfer-Encoding</em> section of <a href="https://tools.ietf.org/html/rfc2045#section-6.8">RFC 2045</a> for more information.</p><h6>Usage</h6><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">.</span><span class="n">lineLength76Characters</span><span class="p">)</span>
</code></pre><h6>Pretty Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><h6>Raw Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\r\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQ==
</code></pre><p>Similar as <code>lineLength64Characters</code>, except a line ending is inserted every 76 characters.</p><h2>Line Endings</h2><p>Prerequisite for line ending options to have an effect is to pair them with one of the line length options, otherwise the result is a single line string and no line endings are inserted. By default all (two) line ending options are enabled as shown in Line Length examples.</p><p>The following examples use <code>lineLength64Characters</code> as a line length option. For that reason pretty results are not shown on a per option basis since they all look the same:</p><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB
AQEBAQ==
</code></pre><h3>Carriage Return - <a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1407202-endlinewithcarriagereturn"><code>endLineWithCarriageReturn</code></a></h3><p><a href="https://en.wikipedia.org/wiki/Carriage_return">Carriage return</a> - <code>\r</code>. Control character from the typewriter era that is somehow still around even though its purpose in the modern technology days seems questionable.</p><h6>Usage</h6><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">[.</span><span class="n">lineLength64Characters</span><span class="p">,</span> <span class="p">.</span><span class="n">endLineWithCarriageReturn</span><span class="p">])</span>
</code></pre><h6>Raw Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\rAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\rAQEBAQ==
</code></pre><h3>Line Feed - <a href="https://developer.apple.com/documentation/foundation/nsdata/base64encodingoptions/1415882-endlinewithlinefeed"><code>endLineWithLineFeed</code></a></h3><p>Newline as most of us are familiar with: <code>\n</code>. Useful when dealing with cryptographic entities such as keys and certificates since they are mostly transported in PEM format which defines 64 character long lines separated by a line feed.</p><h6>Usage</h6><pre><code><span class="n">data</span><span class="p">.</span><span class="n">base64EncodedString</span><span class="p">(</span><span class="n">options</span><span class="p">:</span> <span class="p">[.</span><span class="n">lineLength64Characters</span><span class="p">,</span> <span class="p">.</span><span class="n">endLineWithLineFeed</span><span class="p">])</span>
</code></pre><h6>Raw Result</h6><pre><code class="language-no-highlight">AQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\nAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB\nAQEBAQ==
</code></pre><p class="py-2"><a href="https://twitter.com/intent/tweet?url=https://hungry.dev/posts/posts/2020/base64-encoding-options&via=hngrydev&text=Base64 Encoding Options">Share this article on Twitter</a>. For any questions, comments or feedback reach out to me <a href="https://twitter.com/hungrxyz">@hungrxyz</a>.</p></div><footer><div class="container-md px-3 my-5 markdown-body"><div class="d-flex flex-justify-center"><p class="text-small text-gray v-align-middle">Styled with <a href="https://primer.style">Primer</a> | Generated using <a href="https://github.com/johnsundell/publish">Publish</a> | Hosted on <a href="https://pages.github.com">GitHub Pages</a></p></div></div></footer></body></html>